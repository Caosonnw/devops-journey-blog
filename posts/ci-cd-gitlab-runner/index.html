<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CI/CD For Beginners #2 | CI/CD with GitLab Runner: Step-by-Step Guide | Caosonnw | DevOps Journey & Blog |</title><meta name=keywords content="ubuntu,devops,ci-cd"><meta name=description content="
Target: In this tutorial, you&rsquo;ll learn how to set up and configure GitLab Runner for CI/CD automation. We&rsquo;ll cover installation, registration with GitLab, creating your first pipeline, and implementing automated testing and deployment workflows. By the end, you&rsquo;ll have a fully functional CI/CD pipeline running on your own infrastructure.

Introduction âœ¨
What is GitLab Runner? ğŸ¤”
Have you ever wondered how your code automatically gets built, tested, and deployed every time you push changes to your repository? The magic happens through GitLab Runner - the essential component that makes CI/CD automation possible."><meta name=author content="Cao SÆ¡n"><link rel=canonical href=https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://devops.caosonnw.dev/logos/og-image-1200x630.png><link rel=icon type=image/png sizes=16x16 href=https://devops.caosonnw.dev/logos/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://devops.caosonnw.dev/logos/favicon-32x32.png><link rel=apple-touch-icon href=https://devops.caosonnw.dev/logos/apple-touch-icon.png><link rel=mask-icon href=https://devops.caosonnw.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/"><meta property="og:site_name" content="Caosonnw | DevOps Journey & Blog | "><meta property="og:title" content="CI/CD For Beginners #2 | CI/CD with GitLab Runner: Step-by-Step Guide"><meta property="og:description" content=" Target: In this tutorial, youâ€™ll learn how to set up and configure GitLab Runner for CI/CD automation. Weâ€™ll cover installation, registration with GitLab, creating your first pipeline, and implementing automated testing and deployment workflows. By the end, youâ€™ll have a fully functional CI/CD pipeline running on your own infrastructure.
Introduction âœ¨ What is GitLab Runner? ğŸ¤” Have you ever wondered how your code automatically gets built, tested, and deployed every time you push changes to your repository? The magic happens through GitLab Runner - the essential component that makes CI/CD automation possible."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-08T21:40:00+07:00"><meta property="article:modified_time" content="2025-09-08T21:40:00+07:00"><meta property="article:tag" content="Ubuntu"><meta property="article:tag" content="Devops"><meta property="article:tag" content="Ci-Cd"><meta property="og:image" content="https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/ci-cd-2/gitlab-runner-logo.png"><meta property="og:see_also" content="https://devops.caosonnw.dev/posts/install-gitlab/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/ci-cd-2/gitlab-runner-logo.png"><meta name=twitter:title content="CI/CD For Beginners #2 | CI/CD with GitLab Runner: Step-by-Step Guide"><meta name=twitter:description content="
Target: In this tutorial, you&rsquo;ll learn how to set up and configure GitLab Runner for CI/CD automation. We&rsquo;ll cover installation, registration with GitLab, creating your first pipeline, and implementing automated testing and deployment workflows. By the end, you&rsquo;ll have a fully functional CI/CD pipeline running on your own infrastructure.

Introduction âœ¨
What is GitLab Runner? ğŸ¤”
Have you ever wondered how your code automatically gets built, tested, and deployed every time you push changes to your repository? The magic happens through GitLab Runner - the essential component that makes CI/CD automation possible."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://devops.caosonnw.dev/posts/"},{"@type":"ListItem","position":2,"name":"CI/CD For Beginners #2 | CI/CD with GitLab Runner: Step-by-Step Guide","item":"https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"CI/CD For Beginners #2 | CI/CD with GitLab Runner: Step-by-Step Guide","name":"CI\/CD For Beginners #2 | CI\/CD with GitLab Runner: Step-by-Step Guide","description":" Target: In this tutorial, you\u0026rsquo;ll learn how to set up and configure GitLab Runner for CI/CD automation. We\u0026rsquo;ll cover installation, registration with GitLab, creating your first pipeline, and implementing automated testing and deployment workflows. By the end, you\u0026rsquo;ll have a fully functional CI/CD pipeline running on your own infrastructure.\nIntroduction âœ¨ What is GitLab Runner? ğŸ¤” Have you ever wondered how your code automatically gets built, tested, and deployed every time you push changes to your repository? The magic happens through GitLab Runner - the essential component that makes CI/CD automation possible.\n","keywords":["ubuntu","devops","ci-cd"],"articleBody":" Target: In this tutorial, youâ€™ll learn how to set up and configure GitLab Runner for CI/CD automation. Weâ€™ll cover installation, registration with GitLab, creating your first pipeline, and implementing automated testing and deployment workflows. By the end, youâ€™ll have a fully functional CI/CD pipeline running on your own infrastructure.\nIntroduction âœ¨ What is GitLab Runner? ğŸ¤” Have you ever wondered how your code automatically gets built, tested, and deployed every time you push changes to your repository? The magic happens through GitLab Runner - the essential component that makes CI/CD automation possible.\nGitLab Runner serves as the bridge between your GitLab instance and your infrastructure, acting as:\nğŸ”§ The Executor: Your dedicated worker that runs CI/CD jobs ğŸ—ï¸ The Builder: Compiles and packages your applications ğŸ§ª The Tester: Runs automated tests to ensure code quality\nğŸš€ The Deployer: Handles application deployment to various environments ğŸ“Š The Reporter: Sends job results and logs back to GitLab\nWhy Do You Need GitLab Runner? ğŸ’¡ Without GitLab Runner, your CI/CD pipelines would just be configuration files with no way to execute. GitLab Runner transforms your pipeline definitions into real actions:\nAutomation: Eliminates manual build and deployment processes Consistency: Ensures identical execution environments across all runs Speed: Parallel job execution reduces overall pipeline duration Reliability: Isolated environments prevent conflicts between jobs Scalability: Multiple runners can handle increased workload GitLab Runner is a lightweight, highly-scalable agent that runs your CI/CD jobs and sends the results back to GitLab. It acts as the execution engine for your GitLab CI/CD pipelines, handling the actual building, testing, and deployment of your code.\nThink of GitLab Runner as the worker that performs the heavy lifting in your development workflow. When you push code to GitLab, the Runner automatically picks up your pipeline jobs, executes them in isolated environments, and reports back the results. This automation eliminates manual processes and ensures consistent, reliable deployments.\nKey roles of GitLab Runner include:\nJob Execution: Runs build, test, and deployment scripts defined in your .gitlab-ci.yml file Environment Management: Creates clean, isolated environments for each job execution Scalability: Supports multiple concurrent jobs and can be distributed across multiple machines Flexibility: Works with various executors (Docker, Shell, Kubernetes) to match your infrastructure needs Whether youâ€™re a solo developer or part of a large team, GitLab Runner transforms your development process by automating repetitive tasks and ensuring code quality through consistent testing and deployment practices.\nPrerequisites ğŸ“‹ Before diving into GitLab Runner setup, ensure you have completed the following requirements:\n1. GitLab Server Installation âœ… Following our previous tutorial [CI/CD For Beginners #1], you should have:\nA running GitLab instance (self-hosted or GitLab.com account) Admin access to configure runners Basic understanding of GitLab interface 2. Project Setup ğŸ“ For this tutorial, Iâ€™ll use a Next.js application with the following structure:\n3. Sample Application Files ğŸ› ï¸ Dockerfile for containerizing our Next.js app:\n##### Dockerfile ##### FROM node:18-alpine AS base RUN apk add --no-cache libc6-compat WORKDIR /app FROM base AS deps COPY package.json yarn.lock* package-lock.json* pnpm-lock.yaml* ./ RUN yarn install FROM base AS builder COPY --from=deps /app/node_modules ./node_modules COPY . . RUN yarn run build FROM base AS runner WORKDIR /app ENV NODE_ENV=production \\ PORT=3000 \\ HOSTNAME=0.0.0.0 \\ NEXT_TELEMETRY_DISABLED=1 RUN addgroup -g 1001 -S nodejs \\ \u0026\u0026 adduser -S nextjs -u 1001 # Copy artifacts to run standalone COPY --from=builder /app/public ./public COPY --from=builder /app/.next/standalone ./ COPY --from=builder /app/.next/static ./.next/static USER nextjs EXPOSE 3000 # Run Next.js application CMD [\"node\", \"server.js\"] ğŸ’¡ Tip: If you donâ€™t have a Next.js project ready, you can use our free template repository that includes all necessary files for this tutorial.\nGetting Started ğŸš€ Step 1: Transfer Project Files to Server ğŸ“¤ First, we need to transfer our zipped project files to the Ubuntu server. Weâ€™ll use the scp command for this task.\nSCP Command Format ğŸ“ scp source_path [username]@[server_ip]:destination_path Example:\n# Transfer zipped project to server scp ./nextjs-project.zip ubuntu@192.168.1.100:~/ # With SSH key (if required) scp -i ~/.ssh/id_rsa ./nextjs-project.zip ubuntu@192.168.1.100:~/ After successful transfer, letâ€™s verify the files on our server:\nStep 2: Extract Project Files ğŸ“¦ After successfully transferring files to the server, we need to install unzip to extract our project files.\nInstall Unzip Utility ğŸ”§ # Install unzip package sudo apt install unzip Extract Project Files ğŸ“‚ Once unzip is installed successfully, extract the project files:\n# Extract the project zip file unzip nextjs-project.zip Step 3: Install Docker ğŸ³ Next, weâ€™ll install Docker to run our containerized application. Letâ€™s create a dedicated directory and installation script.\nCreate Installation Directory ğŸ“ # Create tools directory for Docker installation mkdir -p /tools/docker cd /tools/docker Create Docker Installation Script ğŸ“ Create the installation script:\n# Create installation script vi install-docker.sh Docker Installation Script Content:\n#!/bin/bash sudo apt update sudo apt install -y apt-transport-https ca-certificates curl software-properties-common curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo \"deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null sudo apt update sudo apt install -y docker-ce sudo systemctl start docker sudo systemctl enable docker sudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose # Verify installation docker --version docker-compose --version Execute Installation Script âš¡ Make the script executable and run it:\n# Grant execution permissions chmod +x install-docker.sh # Execute the installation script sh install-docker.sh Verify Installation âœ… If the installation is successful, you should see Docker and Docker Compose versions displayed:\nğŸ’¡ Note: The installation process may take a few minutes depending on your internet connection and server performance.\nStep 4: Create GitLab Group and Project ğŸ—ï¸ Now we need to access GitLab through the browser and create a group and project for our CI/CD pipeline.\nCreate GitLab Group ğŸ‘¥ Navigate to your GitLab instance and create a new group:\nCreate New Project ğŸ“‹ After successfully creating the group, click on â€œNew projectâ€ as highlighted in the image below:\nConfigure Project Details ğŸ“ Fill in the project information as shown:\nProject Setup Instructions ğŸ”§ After creating the project successfully, GitLab provides information to configure your Git identity. Make sure to:\nSelect Global for Git local setup Choose HTTPS for Add files option ğŸ’¡ Important: Save these Git configuration commands as youâ€™ll need them to connect your local repository to GitLab.\nStep 5: Configure Ubuntu Server for GitLab ğŸ–¥ï¸ Update Hosts File ğŸ“ Return to your Ubuntu server and update the hosts file to include your GitLab domain:\n# Edit the hosts file vi /etc/hosts Add your GitLab domain entry as shown:\nğŸ’¡ Important: Make sure to use the same domain configuration as your GitLab server.\nCreate Data Directory ğŸ“ Create a dedicated directory for our project data:\n# Create data directory mkdir /data cd /data Configure Git Identity ğŸ”§ Set up your Git configuration with your user details:\n# Configure Git globally git config --global user.name \"Your Name\" git config --global user.email \"your.email@example.com\" Set Up Project Directory ğŸ—‚ï¸ Create the project folder structure:\n# Create project directory (replace 'hoobank' with your project name) mkdir hoobank Copy Project Files ğŸ“‹ Copy all project files from the home directory to the data directory:\n# Copy project files to data directory sudo cp -rf /home/caosonnw/hoobank-app/* /data/hoobank/ ğŸ“Œ Note: Replace /home/caosonnw/hoobank-app/ with your actual project path and hoobank with your project name.\nPush to GitLab ğŸš€ Now letâ€™s check the git status and push our project to GitLab:\n# Navigate to project directory cd /data/hoobank # Initialize git repository git init # Add remote origin git remote add origin https://your-gitlab-instance/your-group/your-project.git # Check git status git status # Add all files git add . # Commit changes git commit -m \"feat(project): initial commit\" # Push to main branch git push --set-upstream origin main Verify GitLab Push ğŸ” After pushing to GitLab, letâ€™s verify that our project files have been successfully uploaded:\nYou should see all your project files now available in the GitLab repository, confirming that the push operation was successful.\nStep 6: Install GitLab Runner ğŸƒâ€â™‚ï¸ Now letâ€™s proceed with installing GitLab Runner on our Ubuntu server. Follow these steps carefully:\nUpdate Package Repository ğŸ“¦ First, update the system package repository:\n# Update package lists apt-get update Add GitLab Runner Repository ğŸ“‹ Add the official GitLab Runner repository to your system:\n# Download and execute GitLab Runner repository script curl -L \"https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh\" | bash Install GitLab Runner âš¡ Install GitLab Runner using apt-get:\n# Install GitLab Runner package apt-get install gitlab-runner Verify Installation âœ… After installation completes, verify that GitLab Runner is installed correctly:\n# Check GitLab Runner version gitlab-runner --version Confirm User Creation ğŸ‘¤ GitLab Runner installation automatically creates a dedicated user account. You can verify this by checking the /etc/passwd file:\n# View the passwd file to confirm gitlab-runner user cat /etc/passwd You should see a gitlab-runner user entry as shown in the image:\nğŸ’¡ Success: The presence of the gitlab-runner user confirms that the installation was completed successfully and the service is ready for configuration.\nStep 7: Register GitLab Runner ğŸ“ Now we need to register our GitLab Runner with the GitLab instance. Return to your GitLab project and navigate to CI/CD settings.\nAccess Runner Configuration ğŸ”§ Go to your GitLab project and navigate to Settings â†’ CI/CD â†’ Runners, then expand the runners section and select Create project runner:\nConfigure Runner Tags ğŸ·ï¸ Enter tags for your runner (e.g., ubuntu-server) to make it easier to identify in pipeline configurations.\nExecute Registration Script âš¡ GitLab will provide a registration script. Copy and paste it into your Ubuntu server terminal:\n# Example registration command (use the one provided by GitLab) gitlab-runner register --url \"https://your-gitlab-instance\" --token \"your-runner-token\" Registration Process ğŸ“‹ During the registration process, youâ€™ll be prompted for several configurations:\nGitLab instance URL: Press Enter to keep the default URL Runner name: Press Enter to use the default name Executor: Choose shell and press Enter Continue until you see the â€œConfigurationâ€ confirmation message, indicating successful registration.\nğŸ’¡ Important: Make sure to select shell as the executor type for this tutorial setup.\nVerify Runner Registration âœ… After successful registration, you should see your runner connected in GitLabâ€™s Runners section:\nConfigure GitLab Runner Settings âš™ï¸ Now letâ€™s configure the GitLab Runner settings for optimal performance:\n# Edit GitLab Runner configuration file vi /etc/gitlab-runner/config.toml In the configuration file, update the concurrent setting to allow multiple simultaneous jobs:\nğŸ’¡ Configuration Tip: Setting concurrent = 4 allows one GitLab Runner to handle 4 projects simultaneously, improving efficiency for multiple pipeline executions.\nGrant Docker Permissions ğŸ³ Give GitLab Runner permission to use Docker:\n# Add gitlab-runner user to docker group usermod -aG docker gitlab-runner Start GitLab Runner Service ğŸš€ Launch the GitLab Runner service in the background:\n# Start GitLab Runner service with nohup for background execution nohup gitlab-runner run --working-directory /home/gitlab-runner/ --config /etc/gitlab-runner/config.toml --service gitlab-runner --user gitlab-runner 2\u003e\u00261 \u0026 This command starts GitLab Runner as a background process and creates a nohup.out log file for monitoring service output.\nVerify Runner Status ğŸ” Confirm that GitLab Runner is running properly:\n# Check running GitLab Runner processes ps -ef | grep gitlab-runner âœ… Success: If you see the GitLab Runner processes in the output, your runner is successfully running and ready to execute CI/CD jobs.\nStep 8: Create CI/CD Pipeline ğŸ”„ After installing GitLab Runner and successfully connecting it to GitLab, letâ€™s start with CI/CD. Iâ€™ll do this manually through the GitLab interface for better understanding.\nCreate Additional Branches ğŸŒ¿ Create two additional branches: develop and staging:\nSet Default Branch ğŸ¯ Set the develop branch as the default branch:\nConfigure Branch Protection ğŸ›¡ï¸ Configure branch protection rules as shown:\nMy workflow approach: When developers create feature branches, make code changes, and push to GitLab requesting a merge to the develop branch, CI/CD will automatically run a pipeline for build/test/deploy/check logs. For simplicity, Iâ€™ll focus on building Docker images and containers for deployment.\nCreate GitLab CI Configuration ğŸ“ Create a .gitlab-ci.yml file in the develop branch with the following content:\nstages: - deploy variables: DOCKER_IMAGES: img-hoobank DOCKER_CONTAINER: cons-hoobank IMAGE_TAG: \"$CI_COMMIT_SHORT_SHA\" # ===== DEPLOY ===== deploy: stage: deploy variables: GIT_STRATEGY: clone tags: [ubuntu-server] only: [develop] script: - docker rm -f \"$DOCKER_CONTAINER\" || true - docker build -t \"$DOCKER_IMAGES:$IMAGE_TAG\" -t \"$DOCKER_IMAGES:latest\" . - \u003e docker run -d --name \"$DOCKER_CONTAINER\" --restart unless-stopped -e NODE_ENV=production -e PORT=3000 -e HOSTNAME=0.0.0.0 -p 3000:3000 \"$DOCKER_IMAGES:$IMAGE_TAG\" - | KEEP_1=\"$DOCKER_IMAGES:$IMAGE_TAG\" KEEP_2=\"$DOCKER_IMAGES:latest\" mapfile -t OLD_IMGS \u003c \u003c( docker images \"$DOCKER_IMAGES\" --format '{{.Repository}}:{{.Tag}}' \\ | grep -v '' \\ | grep -v \"^${KEEP_1}\\$\" \\ | grep -v \"^${KEEP_2}\\$\" ) if [ \"${#OLD_IMGS[@]}\" -gt 0 ]; then echo \"Removing old images: ${OLD_IMGS[*]}\" docker rmi \"${OLD_IMGS[@]}\" || true else echo \"No old images to remove.\" fi docker image prune -f || true Test the Pipeline ğŸ§ª Create a feature branch feature/home:\nMake some changes to a file:\nCommit the changes:\nCreate Merge Request ğŸ”€ Create a merge request to the develop branch:\nAfter accepting the merge:\nYouâ€™ll see a pipeline automatically start and run the deploy job:\nAfter completion, the job will show as successful:\nVerify Deployment ğŸ” Return to the Ubuntu server and check Docker:\nAccess the server IP with port 3000 to see the deployed application:\nâœ… Success: Whenever thereâ€™s a push requesting a merge to the develop branch, the CI/CD pipeline will automatically run and build the latest project. This creates a development environment with a running web application on the server before merging code to main for production deployment.\nConclusion ğŸ‰ Congratulations! Youâ€™ve successfully set up a complete CI/CD pipeline with GitLab Runner. This automated workflow now handles:\nAutomatic Builds: Every merge request triggers a new build Container Deployment: Applications are containerized and deployed automatically Environment Management: Clean separation between development and production Image Cleanup: Old Docker images are automatically removed to save space Your CI/CD pipeline is now ready to handle real-world development workflows, ensuring consistent and reliable deployments every time you push code changes.\nNext Steps ğŸ¯ In the next #, weâ€™ll advance further with:\nJenkins for CI/CD pipeline deployment Monitoring and logging solutions Multi-environment deployments Notification integrations Stay tuned for the next upgrade! ğŸ§‘ğŸ»â€ğŸ’»\n","wordCount":"2318","inLanguage":"en","image":"https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/ci-cd-2/gitlab-runner-logo.png","datePublished":"2025-09-08T21:40:00+07:00","dateModified":"2025-09-08T21:40:00+07:00","author":{"@type":"Person","name":"Cao SÆ¡n"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://devops.caosonnw.dev/posts/ci-cd-gitlab-runner/"},"publisher":{"@type":"Organization","name":"Caosonnw | DevOps Journey \u0026 Blog | ","logo":{"@type":"ImageObject","url":"https://devops.caosonnw.dev/logos/og-image-1200x630.png"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://devops.caosonnw.dev/ accesskey=h title="Caosonnw | DevOps Journey & Blog |  (Alt + H)">Caosonnw | DevOps Journey & Blog |</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://devops.caosonnw.dev/ title=Home><span>Home</span></a></li><li><a href=https://devops.caosonnw.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://devops.caosonnw.dev/series/ci-cd/ title=CI/CD><span>CI/CD</span></a></li><li><a href=https://devops.caosonnw.dev/series/docker/ title=Docker><span>Docker</span></a></li><li><a href=https://devops.caosonnw.dev/series/k8s/ title=K8s><span>K8s</span></a></li><li><a href=https://devops.caosonnw.dev/series/aws/ title=AWS><span>AWS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://devops.caosonnw.dev/>Home</a>&nbsp;Â»&nbsp;<a href=https://devops.caosonnw.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">CI/CD For Beginners #2 | CI/CD with GitLab Runner: Step-by-Step Guide</h1><div class=post-meta><span title='2025-09-08 21:40:00 +0700 +0700'>September 8, 2025</span>&nbsp;Â·&nbsp;11 min&nbsp;Â·&nbsp;Cao SÆ¡n</div></header><figure class=entry-cover><img loading=eager src=https://devops.caosonnw.dev/ci-cd-2/gitlab-runner-logo.png alt="Install GitLab server"><figcaption>Install GitLab server</figcaption></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction- aria-label="Introduction âœ¨">Introduction âœ¨</a><ul><li><a href=#what-is-gitlab-runner- aria-label="What is GitLab Runner? ğŸ¤”">What is GitLab Runner? ğŸ¤”</a></li><li><a href=#why-do-you-need-gitlab-runner- aria-label="Why Do You Need GitLab Runner? ğŸ’¡">Why Do You Need GitLab Runner? ğŸ’¡</a></li></ul></li><li><a href=#prerequisites- aria-label="Prerequisites ğŸ“‹">Prerequisites ğŸ“‹</a><ul><ul><li><a href=#1-gitlab-server-installation- aria-label="1. GitLab Server Installation âœ…">1. GitLab Server Installation âœ…</a></li><li><a href=#2-project-setup- aria-label="2. Project Setup ğŸ“">2. Project Setup ğŸ“</a></li><li><a href=#3-sample-application-files- aria-label="3. Sample Application Files ğŸ› ï¸">3. Sample Application Files ğŸ› ï¸</a></li></ul></ul></li><li><a href=#getting-started- aria-label="Getting Started ğŸš€">Getting Started ğŸš€</a><ul><li><a href=#step-1-transfer-project-files-to-server- aria-label="Step 1: Transfer Project Files to Server ğŸ“¤">Step 1: Transfer Project Files to Server ğŸ“¤</a><ul><li><a href=#scp-command-format- aria-label="SCP Command Format ğŸ“">SCP Command Format ğŸ“</a></li></ul></li><li><a href=#step-2-extract-project-files- aria-label="Step 2: Extract Project Files ğŸ“¦">Step 2: Extract Project Files ğŸ“¦</a><ul><li><a href=#install-unzip-utility- aria-label="Install Unzip Utility ğŸ”§">Install Unzip Utility ğŸ”§</a></li><li><a href=#extract-project-files- aria-label="Extract Project Files ğŸ“‚">Extract Project Files ğŸ“‚</a></li></ul></li><li><a href=#step-3-install-docker- aria-label="Step 3: Install Docker ğŸ³">Step 3: Install Docker ğŸ³</a><ul><li><a href=#create-installation-directory- aria-label="Create Installation Directory ğŸ“">Create Installation Directory ğŸ“</a></li><li><a href=#create-docker-installation-script- aria-label="Create Docker Installation Script ğŸ“">Create Docker Installation Script ğŸ“</a></li><li><a href=#execute-installation-script- aria-label="Execute Installation Script âš¡">Execute Installation Script âš¡</a></li><li><a href=#verify-installation- aria-label="Verify Installation âœ…">Verify Installation âœ…</a></li></ul></li><li><a href=#step-4-create-gitlab-group-and-project- aria-label="Step 4: Create GitLab Group and Project ğŸ—ï¸">Step 4: Create GitLab Group and Project ğŸ—ï¸</a><ul><li><a href=#create-gitlab-group- aria-label="Create GitLab Group ğŸ‘¥">Create GitLab Group ğŸ‘¥</a></li><li><a href=#create-new-project- aria-label="Create New Project ğŸ“‹">Create New Project ğŸ“‹</a></li><li><a href=#configure-project-details- aria-label="Configure Project Details ğŸ“">Configure Project Details ğŸ“</a></li><li><a href=#project-setup-instructions- aria-label="Project Setup Instructions ğŸ”§">Project Setup Instructions ğŸ”§</a></li></ul></li><li><a href=#step-5-configure-ubuntu-server-for-gitlab- aria-label="Step 5: Configure Ubuntu Server for GitLab ğŸ–¥ï¸">Step 5: Configure Ubuntu Server for GitLab ğŸ–¥ï¸</a><ul><li><a href=#update-hosts-file- aria-label="Update Hosts File ğŸ“">Update Hosts File ğŸ“</a></li><li><a href=#create-data-directory- aria-label="Create Data Directory ğŸ“">Create Data Directory ğŸ“</a></li><li><a href=#configure-git-identity- aria-label="Configure Git Identity ğŸ”§">Configure Git Identity ğŸ”§</a></li><li><a href=#set-up-project-directory- aria-label="Set Up Project Directory ğŸ—‚ï¸">Set Up Project Directory ğŸ—‚ï¸</a></li><li><a href=#copy-project-files- aria-label="Copy Project Files ğŸ“‹">Copy Project Files ğŸ“‹</a></li><li><a href=#push-to-gitlab- aria-label="Push to GitLab ğŸš€">Push to GitLab ğŸš€</a></li><li><a href=#verify-gitlab-push- aria-label="Verify GitLab Push ğŸ”">Verify GitLab Push ğŸ”</a></li></ul></li><li><a href=#step-6-install-gitlab-runner- aria-label="Step 6: Install GitLab Runner ğŸƒâ€â™‚ï¸">Step 6: Install GitLab Runner ğŸƒâ€â™‚ï¸</a><ul><li><a href=#update-package-repository- aria-label="Update Package Repository ğŸ“¦">Update Package Repository ğŸ“¦</a></li><li><a href=#add-gitlab-runner-repository- aria-label="Add GitLab Runner Repository ğŸ“‹">Add GitLab Runner Repository ğŸ“‹</a></li><li><a href=#install-gitlab-runner- aria-label="Install GitLab Runner âš¡">Install GitLab Runner âš¡</a></li><li><a href=#verify-installation--1 aria-label="Verify Installation âœ…">Verify Installation âœ…</a></li><li><a href=#confirm-user-creation- aria-label="Confirm User Creation ğŸ‘¤">Confirm User Creation ğŸ‘¤</a></li></ul></li><li><a href=#step-7-register-gitlab-runner- aria-label="Step 7: Register GitLab Runner ğŸ“">Step 7: Register GitLab Runner ğŸ“</a><ul><li><a href=#access-runner-configuration- aria-label="Access Runner Configuration ğŸ”§">Access Runner Configuration ğŸ”§</a></li><li><a href=#configure-runner-tags- aria-label="Configure Runner Tags ğŸ·ï¸">Configure Runner Tags ğŸ·ï¸</a></li><li><a href=#execute-registration-script- aria-label="Execute Registration Script âš¡">Execute Registration Script âš¡</a></li><li><a href=#registration-process- aria-label="Registration Process ğŸ“‹">Registration Process ğŸ“‹</a></li><li><a href=#verify-runner-registration- aria-label="Verify Runner Registration âœ…">Verify Runner Registration âœ…</a></li><li><a href=#configure-gitlab-runner-settings- aria-label="Configure GitLab Runner Settings âš™ï¸">Configure GitLab Runner Settings âš™ï¸</a></li><li><a href=#grant-docker-permissions- aria-label="Grant Docker Permissions ğŸ³">Grant Docker Permissions ğŸ³</a></li><li><a href=#start-gitlab-runner-service- aria-label="Start GitLab Runner Service ğŸš€">Start GitLab Runner Service ğŸš€</a></li><li><a href=#verify-runner-status- aria-label="Verify Runner Status ğŸ”">Verify Runner Status ğŸ”</a></li></ul></li><li><a href=#step-8-create-cicd-pipeline- aria-label="Step 8: Create CI/CD Pipeline ğŸ”„">Step 8: Create CI/CD Pipeline ğŸ”„</a><ul><li><a href=#create-additional-branches- aria-label="Create Additional Branches ğŸŒ¿">Create Additional Branches ğŸŒ¿</a></li><li><a href=#set-default-branch- aria-label="Set Default Branch ğŸ¯">Set Default Branch ğŸ¯</a></li><li><a href=#configure-branch-protection- aria-label="Configure Branch Protection ğŸ›¡ï¸">Configure Branch Protection ğŸ›¡ï¸</a></li><li><a href=#create-gitlab-ci-configuration- aria-label="Create GitLab CI Configuration ğŸ“">Create GitLab CI Configuration ğŸ“</a></li><li><a href=#test-the-pipeline- aria-label="Test the Pipeline ğŸ§ª">Test the Pipeline ğŸ§ª</a></li><li><a href=#create-merge-request- aria-label="Create Merge Request ğŸ”€">Create Merge Request ğŸ”€</a></li><li><a href=#verify-deployment- aria-label="Verify Deployment ğŸ”">Verify Deployment ğŸ”</a></li></ul></li></ul></li><li><a href=#conclusion- aria-label="Conclusion ğŸ‰">Conclusion ğŸ‰</a><ul><li><a href=#next-steps- aria-label="Next Steps ğŸ¯">Next Steps ğŸ¯</a></li></ul></li></ul></div></details></div><div class=post-content><blockquote><p><strong>Target</strong>: In this tutorial, you&rsquo;ll learn how to set up and configure <em>GitLab Runner</em> for CI/CD automation. We&rsquo;ll cover installation, registration with GitLab, creating your first pipeline, and implementing automated testing and deployment workflows. By the end, you&rsquo;ll have a fully functional CI/CD pipeline running on your own infrastructure.</p></blockquote><hr><h1 id=introduction->Introduction âœ¨<a hidden class=anchor aria-hidden=true href=#introduction->#</a></h1><h2 id=what-is-gitlab-runner->What is GitLab Runner? ğŸ¤”<a hidden class=anchor aria-hidden=true href=#what-is-gitlab-runner->#</a></h2><p>Have you ever wondered how your code automatically gets built, tested, and deployed every time you push changes to your repository? The magic happens through GitLab Runner - the essential component that makes CI/CD automation possible.</p><p>GitLab Runner serves as the bridge between your GitLab instance and your infrastructure, acting as:</p><p><strong>ğŸ”§ The Executor</strong>: Your dedicated worker that runs CI/CD jobs
<strong>ğŸ—ï¸ The Builder</strong>: Compiles and packages your applications
<strong>ğŸ§ª The Tester</strong>: Runs automated tests to ensure code quality<br><strong>ğŸš€ The Deployer</strong>: Handles application deployment to various environments
<strong>ğŸ“Š The Reporter</strong>: Sends job results and logs back to GitLab</p><h2 id=why-do-you-need-gitlab-runner->Why Do You Need GitLab Runner? ğŸ’¡<a hidden class=anchor aria-hidden=true href=#why-do-you-need-gitlab-runner->#</a></h2><p>Without GitLab Runner, your CI/CD pipelines would just be configuration files with no way to execute. GitLab Runner transforms your pipeline definitions into real actions:</p><ul><li><strong>Automation</strong>: Eliminates manual build and deployment processes</li><li><strong>Consistency</strong>: Ensures identical execution environments across all runs</li><li><strong>Speed</strong>: Parallel job execution reduces overall pipeline duration</li><li><strong>Reliability</strong>: Isolated environments prevent conflicts between jobs</li><li><strong>Scalability</strong>: Multiple runners can handle increased workload</li></ul><p>GitLab Runner is a lightweight, highly-scalable agent that runs your CI/CD jobs and sends the results back to GitLab. It acts as the execution engine for your GitLab CI/CD pipelines, handling the actual building, testing, and deployment of your code.</p><p>Think of GitLab Runner as the worker that performs the heavy lifting in your development workflow. When you push code to GitLab, the Runner automatically picks up your pipeline jobs, executes them in isolated environments, and reports back the results. This automation eliminates manual processes and ensures consistent, reliable deployments.</p><p>Key roles of GitLab Runner include:</p><ul><li><strong>Job Execution</strong>: Runs build, test, and deployment scripts defined in your <code>.gitlab-ci.yml</code> file</li><li><strong>Environment Management</strong>: Creates clean, isolated environments for each job execution</li><li><strong>Scalability</strong>: Supports multiple concurrent jobs and can be distributed across multiple machines</li><li><strong>Flexibility</strong>: Works with various executors (Docker, Shell, Kubernetes) to match your infrastructure needs</li></ul><p>Whether you&rsquo;re a solo developer or part of a large team, GitLab Runner transforms your development process by automating repetitive tasks and ensuring code quality through consistent testing and deployment practices.</p><h1 id=prerequisites->Prerequisites ğŸ“‹<a hidden class=anchor aria-hidden=true href=#prerequisites->#</a></h1><p>Before diving into GitLab Runner setup, ensure you have completed the following requirements:</p><h3 id=1-gitlab-server-installation->1. GitLab Server Installation âœ…<a hidden class=anchor aria-hidden=true href=#1-gitlab-server-installation->#</a></h3><p>Following our previous tutorial <strong>[CI/CD For Beginners #1]</strong>, you should have:</p><ul><li>A running GitLab instance (self-hosted or GitLab.com account)</li><li>Admin access to configure runners</li><li>Basic understanding of GitLab interface</li></ul><h3 id=2-project-setup->2. Project Setup ğŸ“<a hidden class=anchor aria-hidden=true href=#2-project-setup->#</a></h3><p>For this tutorial, I&rsquo;ll use a <strong>Next.js application</strong> with the following structure:</p><p><img src=/ci-cd-2/1.png alt="Nexjs Structure" class=zoomable loading=lazy></p><h3 id=3-sample-application-files->3. Sample Application Files ğŸ› ï¸<a hidden class=anchor aria-hidden=true href=#3-sample-application-files->#</a></h3><p><strong>Dockerfile</strong> for containerizing our Next.js app:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e>##### Dockerfile #####</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>node:18-alpine</span> <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>base</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> apk add --no-cache libc6-compat<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span> <span style=color:#e6db74>/app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>base</span> <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>deps</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> package.json yarn.lock* package-lock.json* pnpm-lock.yaml* ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> yarn install<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>base</span> <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>deps /app/node_modules ./node_modules<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . .<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> yarn run build<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>base</span> <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>runner</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span> <span style=color:#e6db74>/app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> NODE_ENV<span style=color:#f92672>=</span>production <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3000</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    HOSTNAME<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>.0.0.0 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    NEXT_TELEMETRY_DISABLED<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> addgroup -g <span style=color:#ae81ff>1001</span> -S nodejs <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#f92672>&amp;&amp;</span> adduser -S nextjs -u <span style=color:#ae81ff>1001</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Copy artifacts to run standalone</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>builder /app/public ./public<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>builder /app/.next/standalone ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>builder /app/.next/static      ./.next/static<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>USER</span> <span style=color:#e6db74>nextjs</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>EXPOSE</span> <span style=color:#e6db74>3000</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Run Next.js application</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;node&#34;</span>, <span style=color:#e6db74>&#34;server.js&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><blockquote><p>ğŸ’¡ <strong>Tip</strong>: If you don&rsquo;t have a Next.js project ready, you can use our free template repository that includes all necessary files for this tutorial.</p></blockquote><h1 id=getting-started->Getting Started ğŸš€<a hidden class=anchor aria-hidden=true href=#getting-started->#</a></h1><h2 id=step-1-transfer-project-files-to-server->Step 1: Transfer Project Files to Server ğŸ“¤<a hidden class=anchor aria-hidden=true href=#step-1-transfer-project-files-to-server->#</a></h2><p>First, we need to transfer our zipped project files to the Ubuntu server. We&rsquo;ll use the <code>scp</code> command for this task.</p><h3 id=scp-command-format->SCP Command Format ğŸ“<a hidden class=anchor aria-hidden=true href=#scp-command-format->#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp source_path <span style=color:#f92672>[</span>username<span style=color:#f92672>]</span>@<span style=color:#f92672>[</span>server_ip<span style=color:#f92672>]</span>:destination_path
</span></span></code></pre></div><p><strong>Example:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Transfer zipped project to server</span>
</span></span><span style=display:flex><span>scp ./nextjs-project.zip ubuntu@192.168.1.100:~/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># With SSH key (if required)</span>
</span></span><span style=display:flex><span>scp -i ~/.ssh/id_rsa ./nextjs-project.zip ubuntu@192.168.1.100:~/
</span></span></code></pre></div><p><img src=/ci-cd-2/2.png alt="Transfer files using scp" class=zoomable loading=lazy></p><p>After successful transfer, let&rsquo;s verify the files on our server:</p><p><img src=/ci-cd-2/3.png alt="Verify files on server" class=zoomable loading=lazy></p><h2 id=step-2-extract-project-files->Step 2: Extract Project Files ğŸ“¦<a hidden class=anchor aria-hidden=true href=#step-2-extract-project-files->#</a></h2><p>After successfully transferring files to the server, we need to install <code>unzip</code> to extract our project files.</p><h3 id=install-unzip-utility->Install Unzip Utility ğŸ”§<a hidden class=anchor aria-hidden=true href=#install-unzip-utility->#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install unzip package</span>
</span></span><span style=display:flex><span>sudo apt install unzip
</span></span></code></pre></div><p><img src=/ci-cd-2/11.png alt="Install unzip utility" class=zoomable loading=lazy></p><h3 id=extract-project-files->Extract Project Files ğŸ“‚<a hidden class=anchor aria-hidden=true href=#extract-project-files->#</a></h3><p>Once unzip is installed successfully, extract the project files:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Extract the project zip file</span>
</span></span><span style=display:flex><span>unzip nextjs-project.zip
</span></span></code></pre></div><p><img src=/ci-cd-2/12.png alt="Extract project files" class=zoomable loading=lazy></p><h2 id=step-3-install-docker->Step 3: Install Docker ğŸ³<a hidden class=anchor aria-hidden=true href=#step-3-install-docker->#</a></h2><p>Next, we&rsquo;ll install Docker to run our containerized application. Let&rsquo;s create a dedicated directory and installation script.</p><h3 id=create-installation-directory->Create Installation Directory ğŸ“<a hidden class=anchor aria-hidden=true href=#create-installation-directory->#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create tools directory for Docker installation</span>
</span></span><span style=display:flex><span>mkdir -p /tools/docker
</span></span><span style=display:flex><span>cd /tools/docker
</span></span></code></pre></div><h3 id=create-docker-installation-script->Create Docker Installation Script ğŸ“<a hidden class=anchor aria-hidden=true href=#create-docker-installation-script->#</a></h3><p>Create the installation script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create installation script</span>
</span></span><span style=display:flex><span>vi install-docker.sh
</span></span></code></pre></div><p><strong>Docker Installation Script Content:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo apt install -y apt-transport-https ca-certificates curl software-properties-common
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu </span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo apt install -y docker-ce
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl start docker
</span></span><span style=display:flex><span>sudo systemctl enable docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo curl -L <span style=color:#e6db74>&#34;https://github.com/docker/compose/releases/latest/download/docker-compose-</span><span style=color:#66d9ef>$(</span>uname -s<span style=color:#66d9ef>)</span><span style=color:#e6db74>-</span><span style=color:#66d9ef>$(</span>uname -m<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> -o /usr/local/bin/docker-compose
</span></span><span style=display:flex><span>sudo chmod +x /usr/local/bin/docker-compose
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Verify installation</span>
</span></span><span style=display:flex><span>docker --version
</span></span><span style=display:flex><span>docker-compose --version
</span></span></code></pre></div><h3 id=execute-installation-script->Execute Installation Script âš¡<a hidden class=anchor aria-hidden=true href=#execute-installation-script->#</a></h3><p>Make the script executable and run it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Grant execution permissions</span>
</span></span><span style=display:flex><span>chmod +x install-docker.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Execute the installation script</span>
</span></span><span style=display:flex><span>sh install-docker.sh
</span></span></code></pre></div><h3 id=verify-installation->Verify Installation âœ…<a hidden class=anchor aria-hidden=true href=#verify-installation->#</a></h3><p>If the installation is successful, you should see Docker and Docker Compose versions displayed:</p><p><img src=/ci-cd-2/34.png alt="Docker installation success" class=zoomable loading=lazy></p><blockquote><p>ğŸ’¡ <strong>Note</strong>: The installation process may take a few minutes depending on your internet connection and server performance.</p></blockquote><h2 id=step-4-create-gitlab-group-and-project->Step 4: Create GitLab Group and Project ğŸ—ï¸<a hidden class=anchor aria-hidden=true href=#step-4-create-gitlab-group-and-project->#</a></h2><p>Now we need to access GitLab through the browser and create a group and project for our CI/CD pipeline.</p><h3 id=create-gitlab-group->Create GitLab Group ğŸ‘¥<a hidden class=anchor aria-hidden=true href=#create-gitlab-group->#</a></h3><p>Navigate to your GitLab instance and create a new group:</p><p><img src=/ci-cd-2/4.png alt="Create GitLab Group" class=zoomable loading=lazy></p><h3 id=create-new-project->Create New Project ğŸ“‹<a hidden class=anchor aria-hidden=true href=#create-new-project->#</a></h3><p>After successfully creating the group, click on &ldquo;New project&rdquo; as highlighted in the image below:</p><p><img src=/ci-cd-2/5.png alt="Create New Project" class=zoomable loading=lazy></p><h3 id=configure-project-details->Configure Project Details ğŸ“<a hidden class=anchor aria-hidden=true href=#configure-project-details->#</a></h3><p>Fill in the project information as shown:</p><p><img src=/ci-cd-2/6.png alt="Project Configuration" class=zoomable loading=lazy></p><h3 id=project-setup-instructions->Project Setup Instructions ğŸ”§<a hidden class=anchor aria-hidden=true href=#project-setup-instructions->#</a></h3><p>After creating the project successfully, GitLab provides information to configure your Git identity. Make sure to:</p><ul><li>Select <strong>Global</strong> for Git local setup</li><li>Choose <strong>HTTPS</strong> for Add files option</li></ul><p><img src=/ci-cd-2/7.png alt="GitLab Project Setup" class=zoomable loading=lazy></p><blockquote><p>ğŸ’¡ <strong>Important</strong>: Save these Git configuration commands as you&rsquo;ll need them to connect your local repository to GitLab.</p></blockquote><h2 id=step-5-configure-ubuntu-server-for-gitlab->Step 5: Configure Ubuntu Server for GitLab ğŸ–¥ï¸<a hidden class=anchor aria-hidden=true href=#step-5-configure-ubuntu-server-for-gitlab->#</a></h2><h3 id=update-hosts-file->Update Hosts File ğŸ“<a hidden class=anchor aria-hidden=true href=#update-hosts-file->#</a></h3><p>Return to your Ubuntu server and update the hosts file to include your GitLab domain:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Edit the hosts file</span>
</span></span><span style=display:flex><span>vi /etc/hosts
</span></span></code></pre></div><p>Add your GitLab domain entry as shown:</p><p><img src=/ci-cd-2/10.png alt="Update hosts file" class=zoomable loading=lazy></p><blockquote><p>ğŸ’¡ <strong>Important</strong>: Make sure to use the same domain configuration as your GitLab server.</p></blockquote><h3 id=create-data-directory->Create Data Directory ğŸ“<a hidden class=anchor aria-hidden=true href=#create-data-directory->#</a></h3><p>Create a dedicated directory for our project data:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create data directory</span>
</span></span><span style=display:flex><span>mkdir /data
</span></span><span style=display:flex><span>cd /data
</span></span></code></pre></div><h3 id=configure-git-identity->Configure Git Identity ğŸ”§<a hidden class=anchor aria-hidden=true href=#configure-git-identity->#</a></h3><p>Set up your Git configuration with your user details:</p><p><img src=/ci-cd-2/9.png alt="Git configuration" class=zoomable loading=lazy></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Configure Git globally</span>
</span></span><span style=display:flex><span>git config --global user.name <span style=color:#e6db74>&#34;Your Name&#34;</span>
</span></span><span style=display:flex><span>git config --global user.email <span style=color:#e6db74>&#34;your.email@example.com&#34;</span>
</span></span></code></pre></div><h3 id=set-up-project-directory->Set Up Project Directory ğŸ—‚ï¸<a hidden class=anchor aria-hidden=true href=#set-up-project-directory->#</a></h3><p>Create the project folder structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create project directory (replace &#39;hoobank&#39; with your project name)</span>
</span></span><span style=display:flex><span>mkdir hoobank
</span></span></code></pre></div><h3 id=copy-project-files->Copy Project Files ğŸ“‹<a hidden class=anchor aria-hidden=true href=#copy-project-files->#</a></h3><p>Copy all project files from the home directory to the data directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Copy project files to data directory</span>
</span></span><span style=display:flex><span>sudo cp -rf /home/caosonnw/hoobank-app/* /data/hoobank/
</span></span></code></pre></div><blockquote><p>ğŸ“Œ <strong>Note</strong>: Replace <code>/home/caosonnw/hoobank-app/</code> with your actual project path and <code>hoobank</code> with your project name.</p></blockquote><h3 id=push-to-gitlab->Push to GitLab ğŸš€<a hidden class=anchor aria-hidden=true href=#push-to-gitlab->#</a></h3><p>Now let&rsquo;s check the git status and push our project to GitLab:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Navigate to project directory</span>
</span></span><span style=display:flex><span>cd /data/hoobank
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Initialize git repository</span>
</span></span><span style=display:flex><span>git init
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add remote origin</span>
</span></span><span style=display:flex><span>git remote add origin https://your-gitlab-instance/your-group/your-project.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check git status</span>
</span></span><span style=display:flex><span>git status
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add all files</span>
</span></span><span style=display:flex><span>git add .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Commit changes</span>
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;feat(project): initial commit&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Push to main branch</span>
</span></span><span style=display:flex><span>git push --set-upstream origin main
</span></span></code></pre></div><h3 id=verify-gitlab-push->Verify GitLab Push ğŸ”<a hidden class=anchor aria-hidden=true href=#verify-gitlab-push->#</a></h3><p>After pushing to GitLab, let&rsquo;s verify that our project files have been successfully uploaded:</p><p><img src=/ci-cd-2/16.png alt="Verify successful push to GitLab" class=zoomable loading=lazy></p><p>You should see all your project files now available in the GitLab repository, confirming that the push operation was successful.</p><h2 id=step-6-install-gitlab-runner->Step 6: Install GitLab Runner ğŸƒâ€â™‚ï¸<a hidden class=anchor aria-hidden=true href=#step-6-install-gitlab-runner->#</a></h2><p>Now let&rsquo;s proceed with installing GitLab Runner on our Ubuntu server. Follow these steps carefully:</p><h3 id=update-package-repository->Update Package Repository ğŸ“¦<a hidden class=anchor aria-hidden=true href=#update-package-repository->#</a></h3><p>First, update the system package repository:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Update package lists</span>
</span></span><span style=display:flex><span>apt-get update
</span></span></code></pre></div><h3 id=add-gitlab-runner-repository->Add GitLab Runner Repository ğŸ“‹<a hidden class=anchor aria-hidden=true href=#add-gitlab-runner-repository->#</a></h3><p>Add the official GitLab Runner repository to your system:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Download and execute GitLab Runner repository script</span>
</span></span><span style=display:flex><span>curl -L <span style=color:#e6db74>&#34;https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh&#34;</span> | bash
</span></span></code></pre></div><h3 id=install-gitlab-runner->Install GitLab Runner âš¡<a hidden class=anchor aria-hidden=true href=#install-gitlab-runner->#</a></h3><p>Install GitLab Runner using apt-get:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install GitLab Runner package</span>
</span></span><span style=display:flex><span>apt-get install gitlab-runner
</span></span></code></pre></div><h3 id=verify-installation--1>Verify Installation âœ…<a hidden class=anchor aria-hidden=true href=#verify-installation--1>#</a></h3><p>After installation completes, verify that GitLab Runner is installed correctly:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check GitLab Runner version</span>
</span></span><span style=display:flex><span>gitlab-runner --version
</span></span></code></pre></div><h3 id=confirm-user-creation->Confirm User Creation ğŸ‘¤<a hidden class=anchor aria-hidden=true href=#confirm-user-creation->#</a></h3><p>GitLab Runner installation automatically creates a dedicated user account. You can verify this by checking the <code>/etc/passwd</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># View the passwd file to confirm gitlab-runner user</span>
</span></span><span style=display:flex><span>cat /etc/passwd
</span></span></code></pre></div><p>You should see a <code>gitlab-runner</code> user entry as shown in the image:</p><p><img src=/ci-cd-2/19.png alt="GitLab Runner user verification" class=zoomable loading=lazy></p><blockquote><p>ğŸ’¡ <strong>Success</strong>: The presence of the <code>gitlab-runner</code> user confirms that the installation was completed successfully and the service is ready for configuration.</p></blockquote><h2 id=step-7-register-gitlab-runner->Step 7: Register GitLab Runner ğŸ“<a hidden class=anchor aria-hidden=true href=#step-7-register-gitlab-runner->#</a></h2><p>Now we need to register our GitLab Runner with the GitLab instance. Return to your GitLab project and navigate to CI/CD settings.</p><h3 id=access-runner-configuration->Access Runner Configuration ğŸ”§<a hidden class=anchor aria-hidden=true href=#access-runner-configuration->#</a></h3><p>Go to your GitLab project and navigate to <strong>Settings</strong> â†’ <strong>CI/CD</strong> â†’ <strong>Runners</strong>, then expand the runners section and select <strong>Create project runner</strong>:</p><p><img src=/ci-cd-2/20.png alt="Create project runner" class=zoomable loading=lazy></p><h3 id=configure-runner-tags->Configure Runner Tags ğŸ·ï¸<a hidden class=anchor aria-hidden=true href=#configure-runner-tags->#</a></h3><p>Enter tags for your runner (e.g., <code>ubuntu-server</code>) to make it easier to identify in pipeline configurations.</p><h3 id=execute-registration-script->Execute Registration Script âš¡<a hidden class=anchor aria-hidden=true href=#execute-registration-script->#</a></h3><p>GitLab will provide a registration script. Copy and paste it into your Ubuntu server terminal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Example registration command (use the one provided by GitLab)</span>
</span></span><span style=display:flex><span>gitlab-runner register --url <span style=color:#e6db74>&#34;https://your-gitlab-instance&#34;</span> --token <span style=color:#e6db74>&#34;your-runner-token&#34;</span>
</span></span></code></pre></div><h3 id=registration-process->Registration Process ğŸ“‹<a hidden class=anchor aria-hidden=true href=#registration-process->#</a></h3><p>During the registration process, you&rsquo;ll be prompted for several configurations:</p><ul><li><strong>GitLab instance URL</strong>: Press Enter to keep the default URL</li><li><strong>Runner name</strong>: Press Enter to use the default name</li><li><strong>Executor</strong>: Choose <code>shell</code> and press Enter</li></ul><p>Continue until you see the &ldquo;Configuration&rdquo; confirmation message, indicating successful registration.</p><blockquote><p>ğŸ’¡ <strong>Important</strong>: Make sure to select <code>shell</code> as the executor type for this tutorial setup.</p></blockquote><h3 id=verify-runner-registration->Verify Runner Registration âœ…<a hidden class=anchor aria-hidden=true href=#verify-runner-registration->#</a></h3><p>After successful registration, you should see your runner connected in GitLab&rsquo;s Runners section:</p><p><img src=/ci-cd-2/21.png alt="Runner successfully connected" class=zoomable loading=lazy></p><h3 id=configure-gitlab-runner-settings->Configure GitLab Runner Settings âš™ï¸<a hidden class=anchor aria-hidden=true href=#configure-gitlab-runner-settings->#</a></h3><p>Now let&rsquo;s configure the GitLab Runner settings for optimal performance:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Edit GitLab Runner configuration file</span>
</span></span><span style=display:flex><span>vi /etc/gitlab-runner/config.toml
</span></span></code></pre></div><p>In the configuration file, update the <code>concurrent</code> setting to allow multiple simultaneous jobs:</p><p><img src=/ci-cd-2/22.png alt="Configure concurrent jobs" class=zoomable loading=lazy></p><blockquote><p>ğŸ’¡ <strong>Configuration Tip</strong>: Setting <code>concurrent = 4</code> allows one GitLab Runner to handle 4 projects simultaneously, improving efficiency for multiple pipeline executions.</p></blockquote><h3 id=grant-docker-permissions->Grant Docker Permissions ğŸ³<a hidden class=anchor aria-hidden=true href=#grant-docker-permissions->#</a></h3><p>Give GitLab Runner permission to use Docker:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Add gitlab-runner user to docker group</span>
</span></span><span style=display:flex><span>usermod -aG docker gitlab-runner
</span></span></code></pre></div><h3 id=start-gitlab-runner-service->Start GitLab Runner Service ğŸš€<a hidden class=anchor aria-hidden=true href=#start-gitlab-runner-service->#</a></h3><p>Launch the GitLab Runner service in the background:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Start GitLab Runner service with nohup for background execution</span>
</span></span><span style=display:flex><span>nohup gitlab-runner run --working-directory /home/gitlab-runner/ --config /etc/gitlab-runner/config.toml --service gitlab-runner --user gitlab-runner 2&gt;&amp;<span style=color:#ae81ff>1</span> &amp;
</span></span></code></pre></div><p><img src=/ci-cd-2/24.png alt="Start GitLab Runner service" class=zoomable loading=lazy></p><p>This command starts GitLab Runner as a background process and creates a <code>nohup.out</code> log file for monitoring service output.</p><h3 id=verify-runner-status->Verify Runner Status ğŸ”<a hidden class=anchor aria-hidden=true href=#verify-runner-status->#</a></h3><p>Confirm that GitLab Runner is running properly:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check running GitLab Runner processes</span>
</span></span><span style=display:flex><span>ps -ef | grep gitlab-runner
</span></span></code></pre></div><p><img src=/ci-cd-2/25.png alt="Verify runner process" class=zoomable loading=lazy></p><blockquote><p>âœ… <strong>Success</strong>: If you see the GitLab Runner processes in the output, your runner is successfully running and ready to execute CI/CD jobs.</p></blockquote><h2 id=step-8-create-cicd-pipeline->Step 8: Create CI/CD Pipeline ğŸ”„<a hidden class=anchor aria-hidden=true href=#step-8-create-cicd-pipeline->#</a></h2><p>After installing GitLab Runner and successfully connecting it to GitLab, let&rsquo;s start with CI/CD. I&rsquo;ll do this manually through the GitLab interface for better understanding.</p><h3 id=create-additional-branches->Create Additional Branches ğŸŒ¿<a hidden class=anchor aria-hidden=true href=#create-additional-branches->#</a></h3><p>Create two additional branches: <code>develop</code> and <code>staging</code>:</p><p><img src=/ci-cd-2/28.png alt="Create branches" class=zoomable loading=lazy></p><h3 id=set-default-branch->Set Default Branch ğŸ¯<a hidden class=anchor aria-hidden=true href=#set-default-branch->#</a></h3><p>Set the <code>develop</code> branch as the default branch:</p><p><img src=/ci-cd-2/29.png alt="Set default branch" class=zoomable loading=lazy></p><h3 id=configure-branch-protection->Configure Branch Protection ğŸ›¡ï¸<a hidden class=anchor aria-hidden=true href=#configure-branch-protection->#</a></h3><p>Configure branch protection rules as shown:</p><p><img src=/ci-cd-2/30.png alt="Configure branch protection" class=zoomable loading=lazy></p><p>My workflow approach: When developers create feature branches, make code changes, and push to GitLab requesting a merge to the <code>develop</code> branch, CI/CD will automatically run a pipeline for build/test/deploy/check logs. For simplicity, I&rsquo;ll focus on building Docker images and containers for deployment.</p><h3 id=create-gitlab-ci-configuration->Create GitLab CI Configuration ğŸ“<a hidden class=anchor aria-hidden=true href=#create-gitlab-ci-configuration->#</a></h3><p>Create a <code>.gitlab-ci.yml</code> file in the <code>develop</code> branch with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>stages</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>deploy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>variables</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>DOCKER_IMAGES</span>: <span style=color:#ae81ff>img-hoobank</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>DOCKER_CONTAINER</span>: <span style=color:#ae81ff>cons-hoobank</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>IMAGE_TAG</span>: <span style=color:#e6db74>&#34;$CI_COMMIT_SHORT_SHA&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ===== DEPLOY =====</span>
</span></span><span style=display:flex><span><span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>stage</span>: <span style=color:#ae81ff>deploy</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>variables</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>GIT_STRATEGY</span>: <span style=color:#ae81ff>clone</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tags</span>: [<span style=color:#ae81ff>ubuntu-server]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>only</span>: [<span style=color:#ae81ff>develop]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>docker rm -f &#34;$DOCKER_CONTAINER&#34; || true</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>docker build -t &#34;$DOCKER_IMAGES:$IMAGE_TAG&#34; -t &#34;$DOCKER_IMAGES:latest&#34; .</span>
</span></span><span style=display:flex><span>    - &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      docker run -d --name &#34;$DOCKER_CONTAINER&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      --restart unless-stopped
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      -e NODE_ENV=production -e PORT=3000 -e HOSTNAME=0.0.0.0
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      -p 3000:3000
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;$DOCKER_IMAGES:$IMAGE_TAG&#34;</span>
</span></span><span style=display:flex><span>    - |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      KEEP_1=&#34;$DOCKER_IMAGES:$IMAGE_TAG&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      KEEP_2=&#34;$DOCKER_IMAGES:latest&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      mapfile -t OLD_IMGS &lt; &lt;(
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        docker images &#34;$DOCKER_IMAGES&#34; --format &#39;{{.Repository}}:{{.Tag}}&#39; \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        | grep -v &#39;&lt;none&gt;&#39; \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        | grep -v &#34;^${KEEP_1}\$&#34; \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        | grep -v &#34;^${KEEP_2}\$&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      )
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      if [ &#34;${#OLD_IMGS[@]}&#34; -gt 0 ]; then
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        echo &#34;Removing old images: ${OLD_IMGS[*]}&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        docker rmi &#34;${OLD_IMGS[@]}&#34; || true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      else
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        echo &#34;No old images to remove.&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      fi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      docker image prune -f || true</span>
</span></span></code></pre></div><h3 id=test-the-pipeline->Test the Pipeline ğŸ§ª<a hidden class=anchor aria-hidden=true href=#test-the-pipeline->#</a></h3><p>Create a feature branch <code>feature/home</code>:</p><p><img src=/ci-cd-2/37.png alt="Create feature branch" class=zoomable loading=lazy></p><p>Make some changes to a file:</p><p><img src=/ci-cd-2/38.png alt="Make changes" class=zoomable loading=lazy></p><p>Commit the changes:</p><p><img src=/ci-cd-2/39.png alt="Commit changes" class=zoomable loading=lazy></p><h3 id=create-merge-request->Create Merge Request ğŸ”€<a hidden class=anchor aria-hidden=true href=#create-merge-request->#</a></h3><p>Create a merge request to the <code>develop</code> branch:</p><p><img src=/ci-cd-2/40.png alt="Create merge request" class=zoomable loading=lazy></p><p>After accepting the merge:</p><p><img src=/ci-cd-2/42.png alt="Accept merge" class=zoomable loading=lazy></p><p>You&rsquo;ll see a pipeline automatically start and run the deploy job:</p><p><img src=/ci-cd-2/43.png alt="Pipeline running" class=zoomable loading=lazy></p><p>After completion, the job will show as successful:</p><p><img src=/ci-cd-2/44.png alt="Job completed" class=zoomable loading=lazy></p><h3 id=verify-deployment->Verify Deployment ğŸ”<a hidden class=anchor aria-hidden=true href=#verify-deployment->#</a></h3><p>Return to the Ubuntu server and check Docker:</p><p><img src=/ci-cd-2/45.png alt="Check Docker" class=zoomable loading=lazy></p><p>Access the server IP with port 3000 to see the deployed application:</p><p><img src=/ci-cd-2/46.png alt="Verify web application" class=zoomable loading=lazy></p><blockquote><p>âœ… <strong>Success</strong>: Whenever there&rsquo;s a push requesting a merge to the <code>develop</code> branch, the CI/CD pipeline will automatically run and build the latest project. This creates a development environment with a running web application on the server before merging code to main for production deployment.</p></blockquote><h1 id=conclusion->Conclusion ğŸ‰<a hidden class=anchor aria-hidden=true href=#conclusion->#</a></h1><p>Congratulations! You&rsquo;ve successfully set up a complete CI/CD pipeline with GitLab Runner. This automated workflow now handles:</p><ul><li><strong>Automatic Builds</strong>: Every merge request triggers a new build</li><li><strong>Container Deployment</strong>: Applications are containerized and deployed automatically</li><li><strong>Environment Management</strong>: Clean separation between development and production</li><li><strong>Image Cleanup</strong>: Old Docker images are automatically removed to save space</li></ul><p>Your CI/CD pipeline is now ready to handle real-world development workflows, ensuring consistent and reliable deployments every time you push code changes.</p><h2 id=next-steps->Next Steps ğŸ¯<a hidden class=anchor aria-hidden=true href=#next-steps->#</a></h2><p>In the next #, weâ€™ll advance further with:</p><ul><li>Jenkins for CI/CD pipeline deployment</li><li>Monitoring and logging solutions</li><li>Multi-environment deployments</li><li>Notification integrations</li></ul><p>Stay tuned for the next upgrade! ğŸ§‘ğŸ»â€ğŸ’»</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://devops.caosonnw.dev/tags/ubuntu/>Ubuntu</a></li><li><a href=https://devops.caosonnw.dev/tags/devops/>Devops</a></li><li><a href=https://devops.caosonnw.dev/tags/ci-cd/>Ci-Cd</a></li></ul><nav class=paginav><a class=next href=https://devops.caosonnw.dev/posts/install-gitlab/><span class=title>Next Â»</span><br><span>CI/CD For Beginners #1 | Install GitLab EE on Ubuntu 22.04: Step-by-Step Guide</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://devops.caosonnw.dev/>Caosonnw | DevOps Journey & Blog | </a></span>Â·
<span>Powered by
<a href=https://portfolio.caosonnw.dev/ rel="noopener noreferrer" target=_blank>Caosonnw</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){const e=mediumZoom(".post-content img.zoomable, article img.zoomable",{margin:24,background:"rgba(0,0,0,.8)",scrollOffset:0});e.detach(".nozoom")})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>